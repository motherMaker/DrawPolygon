webpackJsonp([0],{470:function(t,e,o){o(474);var n=o(173)(o(473),o(478),"data-v-11575222",null);n.options.__file="F:\\1-03\\drawPolygon\\src\\views\\index.vue",n.esModule&&Object.keys(n.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] index.vue: functional components are not supported with templates, they should use render functions."),t.exports=n.exports},471:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"map",props:{scale:{type:Number,default:1},Polygons:{type:Object,default:{}},index:{default:0},Drawing:{type:Boolean,default:!1}},data:function(){return{CurrentDoorNum:0,zIndexTop:102,zIndexBottom:101,DoorNumArr:[],PointsArr:[]}},computed:{scaleStyle:function(){return"scale("+this.scale+")"},cpolygon:function(){return this.PointsArr.map(function(t){var e=[];return e.push(t),e})}},methods:{ploygonEvent:function(t){var e=t.target.dataset,o=e.index,n=e.doorid;this.$store.commit("set_choosed",!0),this.$store.commit("set_choosedDoorId",n),this.$store.commit("set_CurrentIndex",o),this.$emit("setDarwing")},pushing:function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.$set(this.DoorNumArr,this.index,t),this.$set(this.PointsArr,this.index,e)},test1:function(){this.$store.commit("set_choosed",!1),this.$store.commit("set_choosedDoorId",-1)}}}},472:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"points",props:{AllPoints:{type:Object,default:{}},Drawing:{type:Boolean,default:!1}},data:function(){return{}},computed:{choosed:function(){return this.$store.state.choosed},choosedDoorId:function(){return this.$store.state.choosedDoorId},pointStyle:function(){return{transform:"scale("+1/this.scale+")"}},polygonChoosed:function(){return this.$store.state.choosed}},methods:{}}},473:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(477),s=o.n(n),r=o(476),i=o.n(r),a=o(95);e.default={components:{points:s.a,MapContent:i.a},data:function(){return{ScaleVariable:1,Drawing:!1,zIndexTop:102,zIndexBottom:101,AllPoints:{},CurrentPoints:[],CurrentIndex:0,Polygons:[],AllPolygons:{},DoorNum:-1,DoorNumCopy:-1,CurrentPointIndex:0,RenameDoorNum:-1,RenameNumCopy:-1}},computed:{scaleStyle:function(){return"scale("+this.ScaleVariable+")"},showRevoke:function(){return!(this.$store.state.choosed||this.Drawing&&-1!==this.DoorNum)}},methods:{scaleAll:function(t){var e=this;if("add"==t&&e.ScaleVariable>2)return void this.$Message.warning("还放大,你怕是瞎了,换个人吧!");if("reduce"==t&&e.ScaleVariable<.4)return void this.$Message.warning("还缩,你眼睛是多好,镜片是放大镜吧!");switch(t){case"add":e.ScaleVariable+=.2;break;case"reduce":e.ScaleVariable-=.2;break;default:alert("缩放事件出错。请刷新页面重试")}},getClickPos:function(t){if(this.Drawing){var e=t.offsetX,o=t.offsetY;0==e&&0==o&&this.$Message.danger("2个点重合了，请重描"),this.$set(this.Polygons,this.CurrentPointIndex,e),this.$set(this.Polygons,this.CurrentPointIndex+1,o),this.mouseClick({offsetX:e,offsetY:o}),this.CurrentPointIndex+=2}},mouseClick:function(t){var e=[t.offsetX,t.offsetY];this.CurrentPoints.push(e),this.$set(this.AllPoints,this.DoorNum,this.CurrentPoints),this.$set(this.AllPolygons,this.DoorNum,this.Polygons),this.$store.commit("set_AllPolygons",this.AllPolygons),this.$store.commit("set_AllPoints",this.AllPoints),this.$refs.mapcontent.pushing(this.DoorNum,this.Polygons)},start:function(){var t=this;this.$Modal.confirm({onCancel:function(){t.$Message.warning("取消绘制！")},onOk:function(){return""===t.DoorNum||-1===t.DoorNum?void t.$Message.warning("不输入门牌号你是想咋样？"):a.a.IdExist(t.DoorNum,t.$store.state.AllPolygons)?void t.$Message.warning("已经存在此id,如果必须要一样的话，请在id前加下划线并且在最后保存的时候备注，谢谢！"):(t.Drawing=!0,void t.$store.commit("set_choosed",!0))},title:"请输入门牌号：",render:function(e){return e("Input",{props:{value:"",autofocus:!0,placeholder:"请输入门牌号...",maxlength:15},on:{input:function(e){t.DoorNum=e.replace(/\s+/g,""),t.$store.commit("set_choosedDoorId",t.DoorNum)}}})}})},stop:function(){this.Drawing=!1,this.$store.commit("set_choosed",!1),this.$store.commit("set_choosedDoorId",-1),this.endDrawing()},endDrawing:function(){this.CurrentIndex+=1,this.CurrentPoints=[],this.Polygons=[],this.DoorNum=-1,this.CurrentPointIndex=0,console.log(this.$store.state.AllPolygons)},revoke:function(){var t=this.$store.state,e=t.choosedDoorId,o=t.choosed;if(-1!==e&&o){var n=this.CurrentPoints,s=this.Polygons;n.splice(n.length-1,1),s.splice(s.length-2,2),this.CurrentPointIndex-=2,this.$set(this.AllPoints,this.DoorNum,this.CurrentPoints),this.$set(this.AllPolygons,this.DoorNum,this.Polygons),this.$refs.mapcontent.pushing(this.DoorNum,this.Polygons)}},rename:function(){var t=this,e=this;e.RenameNumCopy=-1,this.$Modal.confirm({onCancel:function(){e.$Message.warning("取消重命名！"),e.stop()},onOk:function(){return-1===e.RenameNumCopy||""===e.RenameNumCopy?void e.$Message.warning("不输入门牌号你是想咋样？"):a.a.IdExist(e.DoorNum,e.$store.state.AllPolygons)?void e.$Message.warning("已经存在此id,如果必须要一样的话，请在id前加下划线并且在最后保存的时候备注，谢谢！"):void t.renameWork()},title:"当前门牌号为:"+e.DoorNum+",请输入需要更换的门牌号,取消则不修改：",render:function(t){return t("Input",{props:{value:"",autofocus:!0,placeholder:"请输入门牌号...",maxlength:15},on:{input:function(t){e.RenameNumCopy=t.replace(/\s+/g,"")}}})}})},renameWork:function(){this.RenameDoorNum=this.RenameNumCopy;var t=this.$store.state.choosedDoorId;this.DoorNum=this.RenameDoorNum,delete this.AllPoints[t],delete this.AllPolygons[t],this.$store.commit("set_choosedDoorId",this.DoorNum),this.$set(this.AllPoints,this.DoorNum,this.CurrentPoints),this.$set(this.AllPolygons,this.DoorNum,this.Polygons),this.$refs.mapcontent.pushing(this.DoorNum,this.Polygons)},editing:function(){var t=this.$store.state,e=t.choosedDoorId,o=(t.choosed,this.$store.state.AllPolygons),n=this.$store.state.AllPoints;this.Polygons=o[e],this.CurrentPoints=n[e],this.DoorNum=e,this.CurrentPointIndex=o[e].length,this.CurrentIndex=this.$store.state.CurrentIndex,this.Drawing=!0}}}},474:function(t,e){},475:function(t,e,o){t.exports=o.p+"402bee11ede90e8d67e03e0561943921.jpg"},476:function(t,e,o){var n=o(173)(o(471),o(480),null,null);n.options.__file="F:\\1-03\\drawPolygon\\src\\component\\map.vue",n.esModule&&Object.keys(n.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] map.vue: functional components are not supported with templates, they should use render functions."),t.exports=n.exports},477:function(t,e,o){var n=o(173)(o(472),o(479),null,null);n.options.__file="F:\\1-03\\drawPolygon\\src\\component\\points.vue",n.esModule&&Object.keys(n.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] points.vue: functional components are not supported with templates, they should use render functions."),t.exports=n.exports},478:function(t,e,o){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"index"},[n("img",{style:{transform:t.scaleStyle},attrs:{src:o(475),alt:"测试图",id:"img"}}),t._v(" "),n("div",{attrs:{id:"floatConsole"}},[n("Row",{staticClass:"scale"},[n("Button",{attrs:{id:"addImg"},on:{click:function(e){t.scaleAll("add")}}},[t._v("放大图片")]),t._v(" "),n("Button",{attrs:{id:"reduceImg"},on:{click:function(e){t.scaleAll("reduce")}}},[t._v("缩小图片")]),t._v(" "),n("Button",{attrs:{id:"startDraw",disabled:t.Drawing},on:{click:function(e){t.start()}}},[t._v(t._s(t.Drawing?"绘制中":"开始绘制"))]),t._v(" "),n("Button",{attrs:{disabled:!t.Drawing,id:"stopDraw"},on:{click:function(e){t.stop()}}},[t._v("完成绘制")]),t._v(" "),n("Button",{attrs:{disabled:t.showRevoke,id:"revokeDraw"},on:{click:function(e){t.revoke()}}},[t._v("撤回")]),t._v(" "),n("Button",{attrs:{disabled:t.showRevoke,id:"renameDraw"},on:{click:function(e){t.rename()}}},[t._v("重命名")])],1)],1),t._v(" "),n("div",{class:{crosshair:t.Drawing},style:{transform:t.scaleStyle,zIndex:t.Drawing?t.zIndexTop:t.zIndexBottom},attrs:{id:"pointsContent"},on:{click:t.getClickPos}},[n("points",{ref:"points",attrs:{AllPoints:t.AllPoints,Drawing:t.Drawing}})],1),t._v(" "),n("map-content",{ref:"mapcontent",attrs:{scale:t.ScaleVariable,Polygons:t.AllPolygons,index:t.CurrentIndex,Drawing:t.Drawing},on:{setDarwing:t.editing}})],1)},staticRenderFns:[]},t.exports.render._withStripped=!0},479:function(t,e,o){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",t._l(t.AllPoints,function(e,n){return o("div",{directives:[{name:"show",rawName:"v-show",value:t.Drawing&&t.choosedDoorId==n||t.choosed&&t.choosedDoorId==n,expression:"Drawing && choosedDoorId == index || choosed && choosedDoorId == index"}],attrs:{"data-index":n}},t._l(e,function(t,e){return o("div",{staticClass:"point",style:{left:t[0]-2+"px",top:t[1]-2+"px"},attrs:{"data-cindex":e}})}))}))},staticRenderFns:[]},t.exports.render._withStripped=!0},480:function(t,e,o){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("svg",{style:{transform:t.scaleStyle,zIndex:t.Drawing?t.zIndexBottom:t.zIndexTop},attrs:{xmlns:"http://www.w3.org/2000/svg",version:"1.1",id:"map"},on:{click:function(e){if(e.target!==e.currentTarget)return null;t.test1(e)}}},t._l(t.cpolygon,function(e,n){return o("polygon",{key:n,attrs:{points:e,"data-index":n,"data-doorid":t.DoorNumArr[n]},on:{click:function(e){if(e.target!==e.currentTarget)return null;t.ploygonEvent(e)}}})}))])},staticRenderFns:[]},t.exports.render._withStripped=!0}});